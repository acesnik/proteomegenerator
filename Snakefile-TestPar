shell.executable("/bin/bash")
#shell.prefix("source ~/.bashrc; source ~/.bash_profile; ")

singularity: "docker://continuumio/miniconda3:4.5.4"

import os

SMDir = os.getcwd()

# PAR initializes to dummy parameter file unless one is provided
MQ = SMDir + "/MaxQuant/bin/MaxQuantCmd.exe"
PAR = SMDir + "/MaxQuant/mqpar_template.xml"



### Begin User Variables

# Directories
WD = "/lila/data/kentsis/testfiles/test/"
workdir: WD
TMP = '/scratch/chenz4'


# MaxQuant
RAW = "/lila/data/kentsis/testfiles/K0562_mqtesting"


# Scripts


### End User Variables


if os.path.exists(SMDir + "/MaxQuant/mqpar.xml") :
    PAR = SMDir + "/MaxQuant/mqpar.xml"
    ruleorder: mqpar_user > mqpar_conversion

else:
    ruleorder: mqpar_conversion > mqpar_user



rule all:
    input: RAW + "/combined/txt/summary.txt"

include: "pgmtestpar"





#snakemake --snakefile Snakefile-K0562 --cluster "bsub -J {params.J} -n {params.n} -R {params.R} -W 4:00 -o {params.o} -eo {params.eo}" --jn {rulename}.{jobid}.sj -j 50 -k --latency-wait 60 --use-conda --use-singularity --singularity-args "--bind /data:/data,/lila:/lila" --ri -n
# --rulegraph | dot -Tpdf > dag.pdf